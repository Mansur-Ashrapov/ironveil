[gd_scene load_steps=10 format=3 uid="uid://cwgldckefibmk"]

[ext_resource type="Script" uid="uid://bysdxbf14gpdh" path="res://scripts/game_manager.gd" id="1_cc156"]
[ext_resource type="Script" uid="uid://b542tgewywoyv" path="res://scripts/multiplayer_hud.gd" id="1_cw38t"]
[ext_resource type="Script" uid="uid://ckq8iqqlp2qwm" path="res://scripts/multiplayer/networks/network_manager.gd" id="2_ofxfn"]
[ext_resource type="Texture2D" uid="uid://c4rxm8scj221x" path="res://assets/sprites/Spritesheet_UI_Flat.png" id="3_5lcxu"]
[ext_resource type="PackedScene" uid="uid://cjubmbied2t6k" path="res://scenes/slime.tscn" id="3_ofxfn"]
[ext_resource type="PackedScene" uid="uid://b4wlhb7ae0w0v" path="res://scenes/map.tscn" id="5_2dvlx"]

[sub_resource type="AtlasTexture" id="AtlasTexture_b3d1v"]
atlas = ExtResource("3_5lcxu")
region = Rect2(31.917051, 31.96077, 96.149216, 64.05053)

[sub_resource type="LabelSettings" id="LabelSettings_cc156"]
font_size = 29

[sub_resource type="AtlasTexture" id="AtlasTexture_5lcxu"]
atlas = ExtResource("3_5lcxu")
region = Rect2(31.999647, 31.989338, 96.04585, 64.01529)

[node name="steam" type="Node2D" groups=["root"]]

[node name="GameManager" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("1_cc156")

[node name="HUD" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("1_cw38t")

[node name="CanvasLayer" type="CanvasLayer" parent="HUD"]

[node name="MultiplayerHUD" type="Control" parent="HUD/CanvasLayer"]
unique_name_in_owner = true
layout_mode = 3
anchors_preset = 0
offset_left = 59.0
offset_top = 70.0
offset_right = 271.0
offset_bottom = 231.0
scale = Vector2(2.4482765, 2.6173155)

[node name="Panel" type="TextureRect" parent="HUD/CanvasLayer/MultiplayerHUD"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -1.2253513
offset_top = -2.2924252
offset_right = -17.985962
offset_bottom = -44.08632
grow_horizontal = 2
grow_vertical = 2
texture = SubResource("AtlasTexture_b3d1v")

[node name="VBoxContainer" type="VBoxContainer" parent="HUD/CanvasLayer/MultiplayerHUD/Panel"]
layout_mode = 0
offset_left = 9.8028145
offset_top = 12.99041
offset_right = 186.25383
offset_bottom = 104.99041

[node name="HostGame" type="Button" parent="HUD/CanvasLayer/MultiplayerHUD/Panel/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 8
text = "Host New Game"

[node name="JoinAsClient" type="Button" parent="HUD/CanvasLayer/MultiplayerHUD/Panel/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 8
text = "Join as Client"

[node name="UseSteam" type="Button" parent="HUD/CanvasLayer/MultiplayerHUD/Panel/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 8
text = "Use Steam"

[node name="TEST SOLO" type="Button" parent="HUD/CanvasLayer/MultiplayerHUD/Panel/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 8
text = "TEST SOLO
"

[node name="SteamHUD" type="Control" parent="HUD/CanvasLayer"]
unique_name_in_owner = true
visible = false
layout_mode = 3
anchors_preset = 0
offset_left = 60.000004
offset_top = 74.0
offset_right = 180.0
offset_bottom = 174.0
scale = Vector2(3.6164927, 3.338871)

[node name="Panel" type="TextureRect" parent="HUD/CanvasLayer/SteamHUD"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2

[node name="Options" type="VBoxContainer" parent="HUD/CanvasLayer/SteamHUD/Panel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_bottom = -80.0
grow_horizontal = 2
grow_vertical = 2

[node name="HostP2PGame" type="Button" parent="HUD/CanvasLayer/SteamHUD/Panel/Options"]
layout_mode = 2
theme_override_font_sizes/font_size = 8
text = "Host P2P Game"

[node name="ListLobbies" type="Button" parent="HUD/CanvasLayer/SteamHUD/Panel/Options"]
layout_mode = 2
theme_override_font_sizes/font_size = 8
text = "List Lobbies"

[node name="Lobbies" type="ScrollContainer" parent="HUD/CanvasLayer/SteamHUD/Panel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = 44.02686
offset_bottom = 4.0268555
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(1, 0.9497084)

[node name="VBoxContainer" type="VBoxContainer" parent="HUD/CanvasLayer/SteamHUD/Panel/Lobbies"]
layout_mode = 2

[node name="waiting_for_players" type="Label" parent="HUD/CanvasLayer"]
visible = false
offset_left = 422.0
offset_top = 190.0
offset_right = 709.0
offset_bottom = 230.0
text = "Waiting for players..."
label_settings = SubResource("LabelSettings_cc156")

[node name="restart" type="Button" parent="HUD/CanvasLayer"]
visible = false
offset_right = 178.0
offset_bottom = 56.0
text = "RESTART"

[node name="Label" type="Label" parent="HUD/CanvasLayer"]
offset_left = 550.0
offset_top = 97.0
offset_right = 712.0
offset_bottom = 224.0
text = "WASD - move
SPACE - first ability
RMB - second ability

MOUSE AIM NOT WORKING"

[node name="CharacterSelectHUD" type="Control" parent="HUD/CanvasLayer"]
unique_name_in_owner = true
visible = false
layout_mode = 3
anchors_preset = 0
offset_left = 60.0
offset_top = 70.0
offset_right = 300.0
offset_bottom = 280.0
scale = Vector2(2.5, 2.5)

[node name="Panel" type="TextureRect" parent="HUD/CanvasLayer/CharacterSelectHUD"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = -0.4000244
offset_bottom = 10.799988
grow_horizontal = 2
grow_vertical = 2
texture = SubResource("AtlasTexture_5lcxu")

[node name="VBoxContainer" type="VBoxContainer" parent="HUD/CanvasLayer/CharacterSelectHUD/Panel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 8.4
offset_top = 9.200001
offset_right = -8.799988
offset_bottom = -14.400009
grow_horizontal = 2
grow_vertical = 2

[node name="Title" type="Label" parent="HUD/CanvasLayer/CharacterSelectHUD/Panel/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 10
text = "Select Character"
horizontal_alignment = 1

[node name="CharacterButtons" type="HBoxContainer" parent="HUD/CanvasLayer/CharacterSelectHUD/Panel/VBoxContainer"]
layout_mode = 2
alignment = 1

[node name="SwordsmanBtn" type="Button" parent="HUD/CanvasLayer/CharacterSelectHUD/Panel/VBoxContainer/CharacterButtons"]
custom_minimum_size = Vector2(70, 40)
layout_mode = 2
theme_override_font_sizes/font_size = 8
text = "Swordsman"

[node name="MagicianBtn" type="Button" parent="HUD/CanvasLayer/CharacterSelectHUD/Panel/VBoxContainer/CharacterButtons"]
custom_minimum_size = Vector2(70, 40)
layout_mode = 2
theme_override_font_sizes/font_size = 8
text = "Magician"

[node name="SelectedLabel" type="Label" parent="HUD/CanvasLayer/CharacterSelectHUD/Panel/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 8
text = "Selected: None"
horizontal_alignment = 1

[node name="Separator" type="HSeparator" parent="HUD/CanvasLayer/CharacterSelectHUD/Panel/VBoxContainer"]
layout_mode = 2

[node name="PlayersLabel" type="Label" parent="HUD/CanvasLayer/CharacterSelectHUD/Panel/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 8
text = "Players in lobby:"

[node name="PlayersList" type="VBoxContainer" parent="HUD/CanvasLayer/CharacterSelectHUD/Panel/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="ReadyBtn" type="Button" parent="HUD/CanvasLayer/CharacterSelectHUD/Panel/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 8
disabled = true
text = "Ready"

[node name="NetworkManager" type="Node" parent="." node_paths=PackedStringArray("players_spawn_node")]
unique_name_in_owner = true
script = ExtResource("2_ofxfn")
players_spawn_node = NodePath("../Players")

[node name="MultiplayerSpawner" type="MultiplayerSpawner" parent="."]
_spawnable_scenes = PackedStringArray("uid://ci78f8q582qc", "uid://cm02x5j26bk0p")
spawn_path = NodePath("../Players")
spawn_limit = 10

[node name="Players" type="Node2D" parent="."]
position = Vector2(-993, -81)

[node name="Slime" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(763, 163)

[node name="Slime2" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(754, 297)

[node name="Slime3" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1540, 94)

[node name="Slime4" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1529, 285)

[node name="Slime5" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1444, 103)

[node name="Slime6" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1433, 294)

[node name="Slime7" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1361, -3)

[node name="Slime8" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1350, 188)

[node name="Slime9" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1269, 89)

[node name="Slime10" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1258, 280)

[node name="Slime11" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1205, 11)

[node name="Slime12" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1194, 202)

[node name="Slime13" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(2599, 295)

[node name="Slime14" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(2588, 486)

[node name="Slime15" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(2503, 304)

[node name="Slime16" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(2492, 495)

[node name="Slime17" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(2420, 198)

[node name="Slime18" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(2409, 389)

[node name="Slime19" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(2328, 290)

[node name="Slime20" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(2317, 481)

[node name="Slime21" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(2264, 212)

[node name="Slime22" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(2253, 403)

[node name="Slime23" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(2059, 878)

[node name="Slime24" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(2048, 1069)

[node name="Slime25" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1963, 887)

[node name="Slime26" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1952, 1078)

[node name="Slime27" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1880, 781)

[node name="Slime28" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1869, 972)

[node name="Slime29" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1788, 873)

[node name="Slime30" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1777, 1064)

[node name="Slime31" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1724, 795)

[node name="Slime32" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1713, 986)

[node name="Slime33" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1880, -716)

[node name="Slime34" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1869, -525)

[node name="Slime35" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1784, -707)

[node name="Slime36" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1773, -516)

[node name="Slime37" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1701, -813)

[node name="Slime38" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1690, -622)

[node name="Slime39" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1609, -721)

[node name="Slime40" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1598, -530)

[node name="Slime41" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1545, -799)

[node name="Slime42" parent="." instance=ExtResource("3_ofxfn")]
position = Vector2(1534, -608)

[node name="TRASH" type="Node2D" parent="." groups=["trash"]]

[node name="map" parent="." instance=ExtResource("5_2dvlx")]
position = Vector2(598, -50)

[connection signal="pressed" from="HUD/CanvasLayer/MultiplayerHUD/Panel/VBoxContainer/HostGame" to="HUD" method="show_character_select_host"]
[connection signal="pressed" from="HUD/CanvasLayer/MultiplayerHUD/Panel/VBoxContainer/JoinAsClient" to="HUD" method="show_character_select_client"]
[connection signal="pressed" from="HUD/CanvasLayer/MultiplayerHUD/Panel/VBoxContainer/UseSteam" to="HUD" method="use_steam"]
[connection signal="pressed" from="HUD/CanvasLayer/MultiplayerHUD/Panel/VBoxContainer/TEST SOLO" to="HUD" method="play_solo"]
[connection signal="pressed" from="HUD/CanvasLayer/SteamHUD/Panel/Options/HostP2PGame" to="HUD" method="show_character_select_host"]
[connection signal="pressed" from="HUD/CanvasLayer/SteamHUD/Panel/Options/ListLobbies" to="HUD" method="list_steam_lobbies"]
[connection signal="pressed" from="HUD/CanvasLayer/restart" to="HUD" method="_on_restart_pressed"]
[connection signal="pressed" from="HUD/CanvasLayer/CharacterSelectHUD/Panel/VBoxContainer/CharacterButtons/SwordsmanBtn" to="HUD" method="select_swordsman"]
[connection signal="pressed" from="HUD/CanvasLayer/CharacterSelectHUD/Panel/VBoxContainer/CharacterButtons/MagicianBtn" to="HUD" method="select_magician"]
[connection signal="pressed" from="HUD/CanvasLayer/CharacterSelectHUD/Panel/VBoxContainer/ReadyBtn" to="HUD" method="on_ready_pressed"]
